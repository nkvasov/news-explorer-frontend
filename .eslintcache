[{"/Users/nkvasov/web/diploma/news-explorer-frontend/src/index.js":"1","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/App/App.js":"2","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Navigation/Navigation.js":"3","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Header/Header.js":"4","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Main/Main.js":"5","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Footer/Footer.js":"6","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/HamburgerButton/HamburgerButton.js":"7","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SigninPopup/SigninPopup.js":"8","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SavedNews/SavedNews.js":"9","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SignupPopup/SignupPopup.js":"10","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SearchForm/SearchForm.js":"11","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/About/About.js":"12","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Preloader/Preloader.js":"13","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/PopupWithForm/PopupWithForm.js":"14","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SavedNewsHeader/SavedNewsHeader.js":"15","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/NewsCardList/NewsCardList.js":"16","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SearchResult/SearchResult.js":"17","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/NewsCard/NewsCard.js":"18","/Users/nkvasov/web/diploma/news-explorer-frontend/src/utils/NewsApi.js":"19","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/NoSearchResult/NoSearchResult.js":"20","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SearchError/SearchError.js":"21","/Users/nkvasov/web/diploma/news-explorer-frontend/src/contexts/CurrentUserContext.js":"22","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/ProtectedRoute/ProtectedRoute.js":"23","/Users/nkvasov/web/diploma/news-explorer-frontend/src/utils/newsExplorerAuth.js":"24","/Users/nkvasov/web/diploma/news-explorer-frontend/src/utils/NewsExplorerAuth.js":"25","/Users/nkvasov/web/diploma/news-explorer-frontend/src/utils/MainApi.js":"26","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/ConfirmationPopup/ConfirmationPopup.js":"27"},{"size":379,"mtime":1611211386000,"results":"28","hashOfConfig":"29"},{"size":9175,"mtime":1611657712000,"results":"30","hashOfConfig":"29"},{"size":2041,"mtime":1611211386000,"results":"31","hashOfConfig":"29"},{"size":728,"mtime":1611211386000,"results":"32","hashOfConfig":"29"},{"size":2531,"mtime":1611643208000,"results":"33","hashOfConfig":"29"},{"size":1652,"mtime":1611211386000,"results":"34","hashOfConfig":"29"},{"size":495,"mtime":1611211386000,"results":"35","hashOfConfig":"29"},{"size":2411,"mtime":1611571889000,"results":"36","hashOfConfig":"29"},{"size":1240,"mtime":1611673877000,"results":"37","hashOfConfig":"29"},{"size":3095,"mtime":1611657081000,"results":"38","hashOfConfig":"29"},{"size":1443,"mtime":1611338610000,"results":"39","hashOfConfig":"29"},{"size":2275,"mtime":1611211386000,"results":"40","hashOfConfig":"29"},{"size":314,"mtime":1611211386000,"results":"41","hashOfConfig":"29"},{"size":1616,"mtime":1611657794000,"results":"42","hashOfConfig":"29"},{"size":986,"mtime":1611676380000,"results":"43","hashOfConfig":"29"},{"size":696,"mtime":1611649935000,"results":"44","hashOfConfig":"29"},{"size":1313,"mtime":1611648169000,"results":"45","hashOfConfig":"29"},{"size":4269,"mtime":1611676453000,"results":"46","hashOfConfig":"29"},{"size":515,"mtime":1611347759000,"results":"47","hashOfConfig":"29"},{"size":589,"mtime":1611341091000,"results":"48","hashOfConfig":"29"},{"size":545,"mtime":1611347354000,"results":"49","hashOfConfig":"29"},{"size":85,"mtime":1611563044000,"results":"50","hashOfConfig":"29"},{"size":421,"mtime":1611596444000,"results":"51","hashOfConfig":"29"},{"size":1129,"mtime":1611574857000,"results":"52","hashOfConfig":"29"},{"size":1129,"mtime":1611574857000,"results":"53","hashOfConfig":"29"},{"size":2575,"mtime":1611606833000,"results":"54","hashOfConfig":"29"},{"size":1178,"mtime":1611654947000,"results":"55","hashOfConfig":"29"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},"184l1fu",{"filePath":"59","messages":"60","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"58"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"104","usedDeprecatedRules":"58"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},"/Users/nkvasov/web/diploma/news-explorer-frontend/src/index.js",[],["113","114"],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/App/App.js",["115"],"import React, { useState, useEffect } from 'react';\nimport { Route, useLocation, Switch } from 'react-router-dom';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\n\nimport './App.css';\nimport Header from '../Header/Header';\nimport Navigation from '../Navigation/Navigation';\nimport HamburgerButton from '../HamburgerButton/HamburgerButton';\nimport Footer from '../Footer/Footer';\nimport Main from '../Main/Main';\nimport SavedNews from '../SavedNews/SavedNews';\nimport SigninPopup from '../SigninPopup/SigninPopup';\nimport SignupPopup from '../SignupPopup/SignupPopup';\nimport ConfirmationPopup from '../ConfirmationPopup/ConfirmationPopup';\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\n// import { newsApi } from '../../utils/NewsApi';\nimport * as auth from '../../utils/NewsExplorerAuth';\nimport * as mainApi from '../../utils/MainApi';\n\n\nfunction App() {\n  const [somePopupIsOpened, setSomePopupIsOpened] = useState(false);\n  const [navigationIsExpanded, setNavigationIsExpanded] = useState(false);\n  const [signinPopupIsOpened, setSigninPopupisOpened] = useState(false);\n  const [signupPopupIsOpened, setSignupPopupisOpened] = useState(false);\n  const [confirmationPopupIsOpened, setConfirmationPopupIsOpened] = useState(false);\n  const [hamburgerBtnIsPressed, setHamburgerBtnIsPressed] = useState(false);\n  const [themeLight, setThemeLight] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [savedNews, setSavedNews] = useState([]);\n  // const [foundNews, setFoundNews] = useState([]);\n\n  const location = useLocation();\n\n  function tokenCheck() {\n    if (localStorage.getItem('jwt')) {\n      const jwt = localStorage.getItem('jwt');\n      if (jwt) {\n        return auth.getContent(jwt)\n          .then((res) => {\n            if (res) {\n              setLoggedIn(true);\n              setCurrentUser(res);\n              // history.push('/');\n            }\n          })\n          .catch((err) => console.log(err));\n      }\n    }\n  }\n\n  // useEffect(() => {\n  //   if (localStorage.getItem('searched-items')) {\n  //     const storageData = JSON.parse(localStorage.getItem('searched-items'));\n  //     setFoundNews(storageData);\n  //   }\n  // }, []);\n\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  useEffect(() => {\n    if (loggedIn) {\n      const jwt = localStorage.getItem('jwt');\n      mainApi.getSavedNews(jwt)\n        .then((articles) => {\n          setSavedNews(articles.reverse());\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [loggedIn]);\n\n  useEffect(() => {\n    if (location.pathname === '/saved-news') {\n      setThemeLight(true);\n    } else {\n      setThemeLight(false);\n    }\n  }, [location.pathname]);\n\n  // const handleNewsSearch = (queryString) => {\n  //   return newsApi(queryString)\n  //     .then((res) => {\n  //       if (res.articles.length === 0) {\n  //         localStorage.removeItem('searched-items');\n  //         setFoundNews([]);\n  //       } else {\n  //         localStorage.setItem('searched-items', JSON.stringify(res.articles));\n  //         localStorage.setItem('keyword', queryString);\n  //         const storageData = JSON.parse(localStorage.getItem('searched-items'));\n  //         setFoundNews(storageData);\n  //         // setCardsQuantity(3);\n  //       }\n  //     });\n  // };\n\n  const handleHamburgerClick = () => {\n    setNavigationIsExpanded(!navigationIsExpanded);\n    setHamburgerBtnIsPressed(!navigationIsExpanded)\n  }\n\n  const handleSigninClick = () => {\n    if (somePopupIsOpened) {\n      closeAllPopups();\n    }\n    setSigninPopupisOpened(true);\n    setSomePopupIsOpened(true);\n    if (navigationIsExpanded) {\n      setNavigationIsExpanded(false);\n      setHamburgerBtnIsPressed(false);\n    }\n  };\n\n  const handleSignupClick = () => {\n    if (somePopupIsOpened) {\n      closeAllPopups();\n    }\n    setSignupPopupisOpened(true);\n    setSomePopupIsOpened(true);\n    if (navigationIsExpanded) {\n      setNavigationIsExpanded(false);\n      setHamburgerBtnIsPressed(false);\n    }\n  };\n\n  const handleNavigationClick = () => {\n    setNavigationIsExpanded(false);\n    setSomePopupIsOpened(false);\n    setHamburgerBtnIsPressed(false);\n  }\n\n  const handleRegistrationSuccess = () => {\n    if (somePopupIsOpened) {\n      closeAllPopups();\n    }\n    setSomePopupIsOpened(true);\n    setConfirmationPopupIsOpened(true);\n\n  }\n\n  const closeAllPopups = () => {\n    if (signinPopupIsOpened) {\n      setSigninPopupisOpened(false);\n    } else if (signupPopupIsOpened) {\n      setSignupPopupisOpened(false);\n    } else if (confirmationPopupIsOpened) {\n      setConfirmationPopupIsOpened(false);\n    }\n\n    setSomePopupIsOpened(false);\n  };\n\n  const handleEscPress = (e) => {\n    if (e.key === 'Escape') {\n      closeAllPopups();\n    }\n  };\n\n  function signIn(password, email) {\n    return auth.authorize(password, email)\n      .then((data) => {\n        if (data.token) {\n          tokenCheck();\n        }\n      });\n  }\n\n  function signUp(password, email, name) {\n    return auth.register(password, email, name);\n  }\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    setCurrentUser({});\n    setLoggedIn(false);\n  }\n\n  // function checkNewsIsSaved(someNews) {\n  //   return savedNews.some((news) => news.link === someNews.link);\n  // }\n\n  function handleNewsSave(newsCard) {\n    const jwt = localStorage.getItem('jwt');\n    return mainApi.saveNews(jwt, newsCard)\n      .then((res) => {\n        const userNewsUpdated = savedNews.slice();\n        userNewsUpdated.unshift(res);\n        setSavedNews(userNewsUpdated);\n      })\n  }\n\n  function handleNewsDelete(newsCard) {\n    const jwt = localStorage.getItem('jwt');\n    return mainApi.deleteNews(jwt, newsCard._id)\n      .then((res) => {\n        const deletedNewsIndex = savedNews.findIndex((c) => c._id === res._id);\n        const userNewsUpdated = savedNews.slice();\n        userNewsUpdated.splice(deletedNewsIndex, 1);\n        setSavedNews(userNewsUpdated);\n      });\n  }\n  // function handleAuthError(err = { message: 'Что-то пошло не так. Попробуйте еще раз.' }) {\n  //   setTooltipText(err.message);\n  //   setTooltipImage(failIcon);\n  //   setIsInfoTooltipPopupOpen(true);\n  // }\n\n  // function handleAuthSuccess() {\n  //   setTooltipText('Вы успешно зарегистрировались.');\n  //   setTooltipImage(successIcon);\n  //   setIsInfoTooltipPopupOpen(true);\n  // }\n\n\n\n\n  const pageClassName = `page ${(somePopupIsOpened || navigationIsExpanded) && 'page_fixed'}`;\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className={pageClassName}>\n        <Header navigationIsExpanded={navigationIsExpanded} themeLight={themeLight}>\n          <HamburgerButton\n            onClick={handleHamburgerClick}\n            isPressed={hamburgerBtnIsPressed}\n            themeLight={themeLight}\n            isHidden={somePopupIsOpened}\n          />\n          <Navigation\n            expanded={navigationIsExpanded}\n            onSigninBtnClick={handleSigninClick}\n            onMenuClick={handleNavigationClick}\n            themeLight={themeLight}\n          />\n        </Header>\n        <Switch>\n          <Route exact path='/'>\n            <Main\n              handleNewsSave={handleNewsSave}\n              handleNewsDelete={handleNewsDelete}\n              // checkNewsIsSaved={checkNewsIsSaved}\n              savedNews={savedNews}\n              loggedIn={loggedIn}\n            />\n          </Route>\n          <ProtectedRoute\n            exact path='/saved-news'\n            loggedIn={loggedIn}\n            component={SavedNews}\n            newsCards={savedNews}\n            handleNewsDelete={handleNewsDelete}\n          />\n        </Switch>\n\n\n        <SigninPopup\n          isOpen={signinPopupIsOpened}\n          title=\"Вход\"\n          submitBtnText=\"Войти\"\n          alternativeLinkText=\"Зарегистрироваться\"\n          onAlternativeLinkClick={handleSignupClick}\n          onClose={closeAllPopups}\n          onEscPress={handleEscPress}\n          themeLight={themeLight}\n          handleLogin={signIn}\n        />\n\n        <SignupPopup\n          isOpen={signupPopupIsOpened}\n          title=\"Регистрация\"\n          submitBtnText=\"Зарегистрироваться\"\n          onAlternativeLinkClick={handleSigninClick}\n          alternativeLinkText=\"Войти\"\n          onClose={closeAllPopups}\n          onEscPress={handleEscPress}\n          themeLight={themeLight}\n          handleRegistration={signUp}\n          handleRegistrationSuccess={handleRegistrationSuccess}\n        />\n\n        <ConfirmationPopup\n          isOpen={confirmationPopupIsOpened}\n          title='Пользователь успешно зарегистрирован!'\n          onLinkClick={handleSigninClick}\n          onEscPress={handleEscPress}\n          onClose={closeAllPopups}\n          themeLight={themeLight}\n        />\n\n\n\n        {/* <Route path='/saved-news'>\n          <SavedNews newsCards={savedNews} />\n        </Route> */}\n\n        <Footer />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Navigation/Navigation.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Header/Header.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Main/Main.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Footer/Footer.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/HamburgerButton/HamburgerButton.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SigninPopup/SigninPopup.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SavedNews/SavedNews.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SignupPopup/SignupPopup.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SearchForm/SearchForm.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/About/About.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/Preloader/Preloader.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/PopupWithForm/PopupWithForm.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SavedNewsHeader/SavedNewsHeader.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/NewsCardList/NewsCardList.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SearchResult/SearchResult.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/NewsCard/NewsCard.js",["116"],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/utils/NewsApi.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/NoSearchResult/NoSearchResult.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/SearchError/SearchError.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/contexts/CurrentUserContext.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/ProtectedRoute/ProtectedRoute.js",["117"],"import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ component: Component, ...props }) => (\n  <Route>\n    {\n      () => (props.loggedIn ? <Component {...props} /> : <Redirect to=\"/\" />)\n    }\n  </Route>\n);\n\nexport default ProtectedRoute;\n\n\n{/* <Redirect\n  to={{\n    pathname: \"/login\",\n    search: \"?utm=your+face\",\n    state: { referrer: currentLocation }\n  }}\n/> */}","/Users/nkvasov/web/diploma/news-explorer-frontend/src/utils/newsExplorerAuth.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/utils/NewsExplorerAuth.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/utils/MainApi.js",[],"/Users/nkvasov/web/diploma/news-explorer-frontend/src/components/ConfirmationPopup/ConfirmationPopup.js",[],{"ruleId":"118","replacedBy":"119"},{"ruleId":"120","replacedBy":"121"},{"ruleId":"122","severity":1,"message":"123","line":176,"column":12,"nodeType":"124","messageId":"125","endLine":176,"endColumn":19},{"ruleId":"126","severity":1,"message":"127","line":32,"column":6,"nodeType":"128","endLine":32,"endColumn":27,"suggestions":"129"},{"ruleId":"130","severity":1,"message":"131","line":15,"column":1,"nodeType":"132","messageId":"133","endLine":21,"endColumn":7},"no-native-reassign",["134"],"no-negated-in-lhs",["135"],"no-unused-vars","'signOut' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'checkNewsIsSaved' and 'newsCard'. Either include them or remove the dependency array.","ArrayExpression",["136"],"no-lone-blocks","Block is redundant.","BlockStatement","redundantBlock","no-global-assign","no-unsafe-negation",{"desc":"137","fix":"138"},"Update the dependencies array to be: [checkNewsIsSaved, loggedIn, newsCard, savedNews]",{"range":"139","text":"140"},[869,890],"[checkNewsIsSaved, loggedIn, newsCard, savedNews]"]